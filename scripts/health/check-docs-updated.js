#!/usr/bin/env node
const fs=require('fs');
const targets=['README.md','docs/MAINTENANCE_CHECKLIST.md','docs/api/openapi.yaml','src/modules/maintenance/README.md','ROADMAP.md'].filter(fs.existsSync);
let bad=[];

for(const f of targets){
  const t=fs.readFileSync(f,'utf8'); 
  if(!/AUTOGENERATED:\s*Source=maintenance_tasks/i.test(t)) bad.push(f);
}

if(bad.length){
  console.error('Docs missing AUTOGENERATED banner:\n'+bad.map(x=>' - '+x).join('\n'));
  process.exit(1);
}
console.log('OK: Docs synced.');